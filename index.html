<!doctype html>
<head>
	<link href="css/impress-demo.css" rel="stylesheet" />
	<link rel="shortcut icon" href="favicon.png" />
	<link rel="apple-touch-icon" href="apple-touch-icon.png" />
	<script src="js/fullscreen.js"></script>
</head>
<body class="impress-not-supported" onselectstart="return false;">
	<div class="fallback-message">
		<p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
		<p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
	</div>
	<div id="impress">
		<div id="overall" class="step" style="height: 650px; z-index: -1;" data-x="0" data-y="0" data-scale="1">
			<div class="float-div" style="left: 0px; top: 440px;">
				<div class="blue-font title">A Branch Slice Demo </div>
				<div class="black-font subtitle" style="margin-left: 180px; margin-top: 5px;">by <a href="mailto:huangxiaozhe1988@gamil.com">John Wong</a></div>
			</div>
			<div class="float-div" style="width: 280px; height:626px; left: 422px; top: 55px;">
				<div id="bg-div"></div>
			</div>
			<div class="float-div" style="width: 190px;height: 190px; left: 560px; top: 365px;opacity: 0.6;">
				<img src="images/circle.svg" width="190" height="190"/>			
			</div>
			<div class="float-div" style="width: 150px; height: 150px; left: 347px; top: 260px;opacity: 0.6;">
				<img src="images/circle.svg" width="150" height="150" />			
			</div>
			<div class="float-div" style="width: 128px; height: 128px; left: 490px; top: 116px;opacity: 0.6;">
				<img src="images/circle.svg" width="128" height="128" />			
			</div>
			<div class="float-div" style="width: 94px; height: 94px; left: 670px; top: 84px;opacity: 0.6;">
				<img src="images/circle.svg" width="94" height="94" />			
			</div>
			<div class="float-div" style="width: 60px; height: 60px; left: 634px; top: 20px;opacity: 0.6;">
				<img src="images/circle.svg" width="60" height="60" />			
			</div>
		</div>
		<div id="chapter-1" class="step" style="height: 650px;" data-x="198.5" data-y="137.5" data-scale="0.2575" data-rotate="25">
			<div class="float-div">
				<div class="blue-font title-two" style="margin-left: 400px; margin-top: 80px;">Navigation</div>
				<div class="black-font content" style="margin-left: 330px;margin-top: 10px;width: 340px; line-height: 1.2;">
					Left Arrow: previous step<br>
					Right Arrow: next step<br>
					Up Arrow: first step<br>
					Down Arrow: on/off pen<br>
					Space/Tab: next step<br>
					Click in a Step: switch to it<br>
					Click out of Steps: switch to first<br>
					<div style="font-size: 20px;"><br>PS.<br>
					1. Press F11 to get better experence. <br>
					2. If using Chrome, turn off hardware acceleration</div>
				</div>
			</div>
		</div>
		<div id="chapter-2" class="step" style="height: 650px;" data-x="-27.5" data-y="14" data-scale="0.2025" data-rotate="-15">
			<div class="float-div">
				<div class="blue-font title-two" style="margin-left: 260px; margin-top: 80px;">Bottom Nav Bar</div>
				<div class="black-font content" style="margin-left: 210px; margin-top: 10px;width: 420px;">
					You may have noticed navigation bar at bottom. You can also navigate with buttons provided there. Fullscreen button is also provided. It is at right most. The other buttons will be introduced in the next.<br>
				</div>
			</div>
		</div>
		<div id="chapter-3" class="step" style="height: 650px;" data-x="102" data-y="-141" data-scale="0.1725" data-rotate="-5">
			<div class="float-div">
				<div class="blue-font title-two" style="margin-left: 350px; margin-top: 10px;">Use Pen</div>
				<div class="black-font content" style="margin-left: 190px; margin-top: 10px;width: 450px;">You can also draw something freely. Click pen button in bottom bar. Then click on/off. Now your mouse becomes a pen! You can mark something important or draw a picture. You can also choose color and width of pen. To switch to pen or mouse quickly, you can press down arrow.</div>
			</div>
		</div>
		<div id="chapter-4" class="step" style="height: 650px;" data-x="264" data-y="-194" data-scale="0.1275" data-rotate="45">
			<div class="float-div">
				<div class="blue-font title-two" style="margin-left: 350px; margin-top: 80px;">Auto Play</div>
				<div class="black-font content" style="margin-left: 190px; margin-top: 10px;width: 420px;">Release your hand and make this slice play automatically. Click timer button, which is besides fullscreen button. Then choose how long will it wait for to switch to next step. </div>
			</div>
		</div>
		<div id="chapter-5" class="step" style="height: 650px;" data-x="213.75" data-y="-273" data-scale="0.0825" data-rotate="0">
			<div class="float-div">
				<div class="blue-font title-two" style="margin-left: 280px; margin-top: 80px;">Project Summary</div>
				<div class="black-font content" style="margin-left: 190px; margin-top: 10px; width: 420px; ">Source code is available on <a href="https://github.com/JohnWong/impress.js">GitHub</a>. It is forked from <a href="https://github.com/bartaz/impress.js/">impress.js</a>. I refer to Prezi to draw these images.<br><br>If your are interested in it, please contact me (<a href="mailto:huangxiaozhe1988@gamil.com">huangxiaozhe1988@gamil.com</a>)</div>
			</div>
		</div>
		<div id="draft" data-x="-450" data-y="-350" data-scale="0.1">
			<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="9000" height="7000" id="draft-svg">
				<defs>
					<style type="text/css">
					</style>
				</defs> 
				<script type="text/javascript">
				<![CDATA[
				var svgApi = (function(){
					var color = 0;
					var oriWidth = 1;
					var width = 1;
					var ele = document.getElementById("draft-svg");
					var lastX;
					var lastY;
					var colors = ["red", "yellow", "#004f75", "green"];
					var ns = "http://www.w3.org/2000/svg";
					function drawLine(x1, y1, x2, y2) {
						console.log(x1, y1, x2, y2);
						var line = document.createElementNS(ns,"line");
						line.setAttribute("x1", x1);
						line.setAttribute("y1", y1);
						line.setAttribute("x2", x2);
						line.setAttribute("y2", y2);
						line.setAttribute("stroke", colors[color]);
						line.setAttribute("stroke-width", width * 2);
						ele.appendChild(line);
						drawCircle(x2, y2);
					}

					function drawCircle(x, y){
						var circle = document.createElementNS(ns,"circle");
						circle.setAttribute("cx", x);
						circle.setAttribute("cy", y);
						circle.setAttribute("r", width);
						circle.setAttribute("fill", colors[color]);
						ele.appendChild(circle);
					}

					var moveHandler = function(e) {
						var x = e.offsetX? e.offsetX: e.layerX;
						var y = e.offsetY? e.offsetY: e.layerY;
						var x1 = lastX, y1 = lastY;
						setTimeout(function(){
							drawLine(x1, y1, x, y);
						}, 0);
						lastX = x;
						lastY = y;
					};

					ele.addEventListener('mousedown', function(e){
						lastX = e.offsetX? e.offsetX: e.layerX;
						lastY = e.offsetY? e.offsetY: e.layerY;
						drawCircle(lastX, lastY);
						ele.addEventListener('mousemove', moveHandler, false);
						e.preventDefault();
						e.stopPropagation();
					}, false);


					ele.addEventListener('mouseup', function(e) {
						ele.removeEventListener('mousemove', moveHandler, false);
					}, false);

					function setWidth(i){
						if(!i)
							i = oriWidth;
						else
							oriWidth = i;
						var root = document.getElementById(impress().rootId);
						var transform = root.style.webkitTransform;
						if(!transform)
							transform = root.style.MozTransform;
						var mc = transform.match(/scale\([0-9\.]*\)/)[0];
						mc = mc.replace("scale(", "").replace(")", "");
						width = i * 10.0 / Number(mc);
					}
					return {
						setColor: function(i){
							color = i;
						},
						setWidth: setWidth,
						update: setWidth
					};
				})();
				]]>
				</script>
			</svg>	
		</div>
	</div>
	<div class="hint control">
		<p>Use a spacebar or arrow keys to navigate</p>
	</div>
	<script>
	if ("ontouchstart" in document.documentElement) { 
		document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
	}
	document.querySelector(".hint").addEventListener("click", function(e){
		document.querySelector(".hint").style['display'] = "none";
	}, false);
	</script>
	<div id="time-menu" class="dropdown clearfix control">
		<ul class="dropdown-menu" style="display: block; position: static;">
			<li class="control" onclick="startAutoPlay(20)"><div class="menu-item"><b>20 sec</b></div></li>
			<li class="control" onclick="startAutoPlay(10)"><div class="menu-item"><b>10 sec</b></div></li>
			<li class="control" onclick="startAutoPlay(5)"><div class="menu-item"><b>5 sec</b></div></li>
			<li class="control" onclick="stopAutoPlay()"><div class="menu-item"><b>Off</b></div></li>
		</ul>
	</div>
	<div id="menu-bar" class="navbar navbar-fixed-bottom">
		<div class="container">
			<div id="pen-menu" class="control">
				<ul class="dropdown-menu" style="display: block;">
					<li class="control">
						<div id="pen-container">
							<div class="sub-menu" onclick="svgApi.setColor(0);" style="background-color:red"></div><div class="sub-menu" onclick="svgApi.setColor(1);" style="background-color:yellow"></div><div class="sub-menu" onclick="svgApi.setColor(2);" style="background-color:#004f75"></div><div class="sub-menu" onclick="svgApi.setColor(3);" style="background-color:green"></div>
						</div>
					</li>
					<li class="control">
						<div id="pen-container">
							<div class="sub-menu" onclick="svgApi.setWidth(1);" style="background: url(images/width1.svg)"></div><div class="sub-menu" onclick="svgApi.setWidth(2);" style="background: url(images/width2.svg)"></div><div class="sub-menu" onclick="svgApi.setWidth(4);" style="background: url(images/width3.svg)""></div><div class="sub-menu" onclick="svgApi.setWidth(8);" style="background: url(images/width4.svg)""></div>
						</div>
					</li>
					<li class="control" onclick="showHideById('draft')"><div class="menu-item"><b>On/Off</b></div>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<div class="navbar navbar-fixed-bottom control">
		<div class="navbar-inner">
			<div class="container">
				<ul class="nav">
					<li class="control"><div class="no-padding" onclick="api.first();"><img class="padding-five" src="images/home-5-24.png"/></div></li>
					<li class="control"><div class="no-padding" onclick="api.prev();"><img class="padding-five" src="images/arrow-21-24.png"/></div></li>
					<li class="control"><div class="no-padding" onclick="api.next();"><img class="padding-five" src="images/arrow-22-24.png"/></div></li>
					<li class="control"><div class="no-padding" onclick="showHideById('menu-bar')"><img class="padding-five" src="images/glyphicons_edit.png"/></div></li>
				</ul>
			</div>
			<div id="right-container" class="container">
				<ul id="right-control" class="nav">
					<li class="control"><div class="no-padding" onclick="showHideById('time-menu')"><img class="padding-five" src="images/time-5-24.png"/></div></li>
					<li class="control"><div class="no-padding" id="fullscreen" onclick="window.fullScreenApi.changeFullScreen();"><img class="padding-five" src="images/fullscreen-12-24.png"/></div></li>
				</ul>
			</div>
		</div>
	</div>
	<div id="github" class="control">
		<iframe src="http://ghbtns.com/github-btn.html?user=johnwong&repo=impress.js&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="76px" height="20px"></iframe>
		<iframe src="http://ghbtns.com/github-btn.html?user=johnwong&repo=impress.js&type=fork&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="76px" height="20px"></iframe>
	</div>
	<script src="js/impress.js"></script>
	<script>
	var byId = function ( id ) {
		return document.getElementById(id);
	};

	var api = impress(); 
	api.init();
	api.initCustom(byId("draft"), svgApi.update);
	document.addEventListener("keyup", function ( event ) {
            if ( event.keyCode === 40) {
                showHideById("draft");
                event.preventDefault();
            }
        }, false);

	var showHideById = function (id){
		var style = byId(id).style;
		if(style['display'] == 'block')
			style['display'] = 'none';
		else
			style['display'] = 'block';
	}

	var startAutoPlay = function (sec){
		api.startAutoPlay(sec);
		showHideById("time-menu");
	}

	var stopAutoPlay = function (){
		api.stopAutoPlay();
		showHideById("time-menu");
	}
	</script>
</body>
</html>